schema: '2.0'
stages:
  produce_vectorial_change@0:
    cmd: python src/alceo/processing/change_from_annotations.py -i data/sites/ASWAN/annotations/pits.geojson
      -f 04/08/2005 -s 05/10/2015 -o data/sites/ASWAN/change/AS_04_08_2005/AS_05_10_2015/vectorial
      --crs EPSG:32636
    deps:
    - path: data/sites/ASWAN/annotations/pits.geojson
      md5: ebb1fd8f9b26b648458e4382f6a52d8a
      size: 1339940
    - path: src/alceo/processing/change_from_annotations.py
      md5: 709b58d7f45e1e8f131c3ed0c14c2d2e
      size: 6581
    outs:
    - path: data/sites/ASWAN/change/AS_04_08_2005/AS_05_10_2015/vectorial
      md5: e3d31e24fccce0dac8f49ac589162fbe.dir
      size: 796399
      nfiles: 3
  rasterize_change@0:
    cmd:
    - mkdir -p data/sites/ASWAN/change/AS_04_08_2005/AS_05_10_2015/raster/
    - rio rasterize data/sites/ASWAN/change/AS_04_08_2005/AS_05_10_2015/vectorial/pits.appeared.geojson
      --like data/sites/ASWAN/images/AS_04_08_2005/AS_04_08_2005_QB_NN_diffuse_geo.tif
      --output data/sites/ASWAN/change/AS_04_08_2005/AS_05_10_2015/raster/pits.appeared.tif
    deps:
    - path: data/sites/ASWAN/change/AS_04_08_2005/AS_05_10_2015/vectorial/pits.appeared.geojson
      md5: bcc39b79440fd9e1bf718b7a656b90cb
      size: 485418
    - path: data/sites/ASWAN/images/AS_04_08_2005/AS_04_08_2005_QB_NN_diffuse_geo.tif
      md5: d5d532307cd9d2df5a731a32c096f534
      size: 579448123
    outs:
    - path: data/sites/ASWAN/change/AS_04_08_2005/AS_05_10_2015/raster/pits.appeared.tif
      md5: 256e11e4bba5400bf9ce8d12e43a1c57
      size: 144861452
  rasterize_change@1:
    cmd:
    - mkdir -p data/sites/ASWAN/change/AS_04_08_2005/AS_05_10_2015/raster/
    - rio rasterize data/sites/ASWAN/change/AS_04_08_2005/AS_05_10_2015/vectorial/pits.disappeared.geojson
      --like data/sites/ASWAN/images/AS_04_08_2005/AS_04_08_2005_QB_NN_diffuse_geo.tif
      --output data/sites/ASWAN/change/AS_04_08_2005/AS_05_10_2015/raster/pits.disappeared.tif
    deps:
    - path: data/sites/ASWAN/change/AS_04_08_2005/AS_05_10_2015/vectorial/pits.disappeared.geojson
      md5: 4601b0f682dd88d25f7b1ae82de4f27e
      size: 247692
    - path: data/sites/ASWAN/images/AS_04_08_2005/AS_04_08_2005_QB_NN_diffuse_geo.tif
      md5: d5d532307cd9d2df5a731a32c096f534
      size: 579448123
    outs:
    - path: data/sites/ASWAN/change/AS_04_08_2005/AS_05_10_2015/raster/pits.disappeared.tif
      md5: c2b46089d06d95922264e4466409e737
      size: 144861452
  produce_vectorial_change@2:
    cmd: python src/alceo/processing/change_from_annotations.py -i data/sites/ASWAN/annotations/pits.geojson
      -f 04/08/2005 -s 20/03/2018 -o data/sites/ASWAN/change/AS_04_08_2005/AS_20_03_2018/vectorial
      --crs EPSG:32636
    deps:
    - path: data/sites/ASWAN/annotations/pits.geojson
      md5: ebb1fd8f9b26b648458e4382f6a52d8a
      size: 1339940
    - path: src/alceo/processing/change_from_annotations.py
      md5: 709b58d7f45e1e8f131c3ed0c14c2d2e
      size: 6581
    outs:
    - path: data/sites/ASWAN/change/AS_04_08_2005/AS_20_03_2018/vectorial
      md5: 4eafd365f2f02185e2e0b55be1a84bf2.dir
      size: 1110118
      nfiles: 3
  rasterize_change@4:
    cmd:
    - mkdir -p data/sites/ASWAN/change/AS_04_08_2005/AS_20_03_2018/raster/
    - rio rasterize data/sites/ASWAN/change/AS_04_08_2005/AS_20_03_2018/vectorial/pits.appeared.geojson
      --like data/sites/ASWAN/images/AS_04_08_2005/AS_04_08_2005_QB_NN_diffuse_geo.tif
      --output data/sites/ASWAN/change/AS_04_08_2005/AS_20_03_2018/raster/pits.appeared.tif
    deps:
    - path: data/sites/ASWAN/change/AS_04_08_2005/AS_20_03_2018/vectorial/pits.appeared.geojson
      md5: 4591490a6a0e0d5e4b4fa41beddbb93b
      size: 799057
    - path: data/sites/ASWAN/images/AS_04_08_2005/AS_04_08_2005_QB_NN_diffuse_geo.tif
      md5: d5d532307cd9d2df5a731a32c096f534
      size: 579448123
    outs:
    - path: data/sites/ASWAN/change/AS_04_08_2005/AS_20_03_2018/raster/pits.appeared.tif
      md5: 3ed0a4275d630f412f786d12a38047e1
      size: 144861452
  produce_vectorial_change@1:
    cmd: python src/alceo/processing/change_from_annotations.py -i data/sites/ASWAN/annotations/pits.geojson
      -f 05/10/2015 -s 20/03/2018 -o data/sites/ASWAN/change/AS_05_10_2015/AS_20_03_2018/vectorial
      --crs EPSG:32636
    deps:
    - path: data/sites/ASWAN/annotations/pits.geojson
      md5: ebb1fd8f9b26b648458e4382f6a52d8a
      size: 1339940
    - path: src/alceo/processing/change_from_annotations.py
      md5: 709b58d7f45e1e8f131c3ed0c14c2d2e
      size: 6581
    outs:
    - path: data/sites/ASWAN/change/AS_05_10_2015/AS_20_03_2018/vectorial
      md5: 9bda2d4a15a3bd1fd9ca488286714ff4.dir
      size: 1203390
      nfiles: 3
  rasterize_change@3:
    cmd:
    - mkdir -p data/sites/ASWAN/change/AS_05_10_2015/AS_20_03_2018/raster/
    - rio rasterize data/sites/ASWAN/change/AS_05_10_2015/AS_20_03_2018/vectorial/pits.disappeared.geojson
      --like data/sites/ASWAN/images/AS_05_10_2015/AS_05_10_2015_NN_diffuse_geo.tif
      --output data/sites/ASWAN/change/AS_05_10_2015/AS_20_03_2018/raster/pits.disappeared.tif
    deps:
    - path: data/sites/ASWAN/change/AS_05_10_2015/AS_20_03_2018/vectorial/pits.disappeared.geojson
      md5: 9bdc9151138e30d6203bc8d97550cdc9
      size: 253042
    - path: data/sites/ASWAN/images/AS_05_10_2015/AS_05_10_2015_NN_diffuse_geo.tif
      md5: 8087bb48ff642de219e7bfe5549114a1
      size: 1207978303
    outs:
    - path: data/sites/ASWAN/change/AS_05_10_2015/AS_20_03_2018/raster/pits.disappeared.tif
      md5: a97f353576a37fa13aaca44a868fb7d8
      size: 302012782
  produce_vectorial_tiles:
    cmd: python src/alceo/processing/produce_tiles.py -i data/sites/ASWAN/images/AS_04_08_2005/AS_04_08_2005_QB_NN_diffuse_geo.tif
      -p ASWAN_ -a data/sites/ASWAN/area_of_interest.geojson -o data/sites/ASWAN/tiles.geojson
      -tw 256 -th 256
    deps:
    - path: data/sites/ASWAN/area_of_interest.geojson
      md5: 240669db0f25b399f4212a443324f6fc
      size: 4656
    - path: data/sites/ASWAN/images/AS_04_08_2005/AS_04_08_2005_QB_NN_diffuse_geo.tif
      md5: d5d532307cd9d2df5a731a32c096f534
      size: 579448123
    - path: src/alceo/processing/produce_tiles.py
      md5: 8cee0d4f36707b321541dee97ba267f1
      size: 5320
    outs:
    - path: data/sites/ASWAN/tiles.geojson
      md5: 9a5543948a27ad9b6b382ecd050308fc
      size: 138567
  tilize_change@0:
    cmd:
    - mkdir -p data/sites/ASWAN/change/AS_04_08_2005/AS_05_10_2015/raster/pits.appeared/tiles
    - python src/alceo/processing/rasterize_tiles.py -t data/sites/ASWAN/tiles.geojson
      -i data/sites/ASWAN/change/AS_04_08_2005/AS_05_10_2015/raster/pits.appeared.tif
      -o data/sites/ASWAN/change/AS_04_08_2005/AS_05_10_2015/raster/pits.appeared/tiles
    deps:
    - path: data/sites/ASWAN/change/AS_04_08_2005/AS_05_10_2015/raster/pits.appeared.tif
      md5: 256e11e4bba5400bf9ce8d12e43a1c57
      size: 144861452
    - path: data/sites/ASWAN/tiles.geojson
      md5: 9a5543948a27ad9b6b382ecd050308fc
      size: 138567
    - path: src/alceo/processing/rasterize_tiles.py
      md5: ea9cf7341953f40c4fc10acc7deca653
      size: 5338
    outs:
    - path: data/sites/ASWAN/change/AS_04_08_2005/AS_05_10_2015/raster/pits.appeared/tiles
      md5: 402db886ee51c9acfbd558b14f134787.dir
      size: 40247568
      nfiles: 306
  tilize_image@1:
    cmd: python src/alceo/processing/rasterize_tiles.py -t data/sites/ASWAN/tiles.geojson
      -i data/sites/ASWAN/images/AS_05_10_2015/AS_05_10_2015_NN_diffuse_geo.tif -o
      data/sites/ASWAN/tiles/AS_05_10_2015
    deps:
    - path: data/sites/ASWAN/images/AS_05_10_2015/AS_05_10_2015_NN_diffuse_geo.tif
      md5: 8087bb48ff642de219e7bfe5549114a1
      size: 1207978303
    - path: data/sites/ASWAN/tiles.geojson
      md5: 9a5543948a27ad9b6b382ecd050308fc
      size: 138567
    - path: src/alceo/processing/rasterize_tiles.py
      md5: ea9cf7341953f40c4fc10acc7deca653
      size: 5338
    outs:
    - path: data/sites/ASWAN/tiles/AS_05_10_2015/
      md5: 1198ea1086720b55616b1bb0d9ffbeea.dir
      size: 160670196
      nfiles: 306
  tilize_change@1:
    cmd:
    - mkdir -p data/sites/ASWAN/change/AS_04_08_2005/AS_05_10_2015/raster/pits.disappeared/tiles
    - python src/alceo/processing/rasterize_tiles.py -t data/sites/ASWAN/tiles.geojson
      -i data/sites/ASWAN/change/AS_04_08_2005/AS_05_10_2015/raster/pits.disappeared.tif
      -o data/sites/ASWAN/change/AS_04_08_2005/AS_05_10_2015/raster/pits.disappeared/tiles
    deps:
    - path: data/sites/ASWAN/change/AS_04_08_2005/AS_05_10_2015/raster/pits.disappeared.tif
      md5: c2b46089d06d95922264e4466409e737
      size: 144861452
    - path: data/sites/ASWAN/tiles.geojson
      md5: 9a5543948a27ad9b6b382ecd050308fc
      size: 138567
    - path: src/alceo/processing/rasterize_tiles.py
      md5: ea9cf7341953f40c4fc10acc7deca653
      size: 5338
    outs:
    - path: data/sites/ASWAN/change/AS_04_08_2005/AS_05_10_2015/raster/pits.disappeared/tiles
      md5: aa0220c66240edc4a747d7efa4e19a2e.dir
      size: 40247568
      nfiles: 306
  rasterize_change@2:
    cmd:
    - mkdir -p data/sites/ASWAN/change/AS_05_10_2015/AS_20_03_2018/raster/
    - rio rasterize data/sites/ASWAN/change/AS_05_10_2015/AS_20_03_2018/vectorial/pits.appeared.geojson
      --like data/sites/ASWAN/images/AS_05_10_2015/AS_05_10_2015_NN_diffuse_geo.tif
      --output data/sites/ASWAN/change/AS_05_10_2015/AS_20_03_2018/raster/pits.appeared.tif
    deps:
    - path: data/sites/ASWAN/change/AS_05_10_2015/AS_20_03_2018/vectorial/pits.appeared.geojson
      md5: 9175c3d0399a27ff730f1a724d709e85
      size: 557786
    - path: data/sites/ASWAN/images/AS_05_10_2015/AS_05_10_2015_NN_diffuse_geo.tif
      md5: 8087bb48ff642de219e7bfe5549114a1
      size: 1207978303
    outs:
    - path: data/sites/ASWAN/change/AS_05_10_2015/AS_20_03_2018/raster/pits.appeared.tif
      md5: 110ec62bd903c5b6fb4e6cf813a4317f
      size: 302012782
  tilize_change@2:
    cmd:
    - mkdir -p data/sites/ASWAN/change/AS_05_10_2015/AS_20_03_2018/raster/pits.appeared/tiles
    - python src/alceo/processing/rasterize_tiles.py -t data/sites/ASWAN/tiles.geojson
      -i data/sites/ASWAN/change/AS_05_10_2015/AS_20_03_2018/raster/pits.appeared.tif
      -o data/sites/ASWAN/change/AS_05_10_2015/AS_20_03_2018/raster/pits.appeared/tiles
    deps:
    - path: data/sites/ASWAN/change/AS_05_10_2015/AS_20_03_2018/raster/pits.appeared.tif
      md5: 110ec62bd903c5b6fb4e6cf813a4317f
      size: 302012782
    - path: data/sites/ASWAN/tiles.geojson
      md5: 9a5543948a27ad9b6b382ecd050308fc
      size: 138567
    - path: src/alceo/processing/rasterize_tiles.py
      md5: ea9cf7341953f40c4fc10acc7deca653
      size: 5338
    outs:
    - path: data/sites/ASWAN/change/AS_05_10_2015/AS_20_03_2018/raster/pits.appeared/tiles
      md5: d4d4e0207966b58888fdf872ab8c4402.dir
      size: 40247568
      nfiles: 306
  tilize_change@3:
    cmd:
    - mkdir -p data/sites/ASWAN/change/AS_05_10_2015/AS_20_03_2018/raster/pits.disappeared/tiles
    - python src/alceo/processing/rasterize_tiles.py -t data/sites/ASWAN/tiles.geojson
      -i data/sites/ASWAN/change/AS_05_10_2015/AS_20_03_2018/raster/pits.disappeared.tif
      -o data/sites/ASWAN/change/AS_05_10_2015/AS_20_03_2018/raster/pits.disappeared/tiles
    deps:
    - path: data/sites/ASWAN/change/AS_05_10_2015/AS_20_03_2018/raster/pits.disappeared.tif
      md5: a97f353576a37fa13aaca44a868fb7d8
      size: 302012782
    - path: data/sites/ASWAN/tiles.geojson
      md5: 9a5543948a27ad9b6b382ecd050308fc
      size: 138567
    - path: src/alceo/processing/rasterize_tiles.py
      md5: ea9cf7341953f40c4fc10acc7deca653
      size: 5338
    outs:
    - path: data/sites/ASWAN/change/AS_05_10_2015/AS_20_03_2018/raster/pits.disappeared/tiles
      md5: e9bb6cac36de16d5a0d2f8a8873ffc20.dir
      size: 40247568
      nfiles: 306
  tilize_image@2:
    cmd: python src/alceo/processing/rasterize_tiles.py -t data/sites/ASWAN/tiles.geojson
      -i data/sites/ASWAN/images/AS_20_03_2018/AS_20_03_2018_NN_diffuse.tif -o data/sites/ASWAN/tiles/AS_20_03_2018
    deps:
    - path: data/sites/ASWAN/images/AS_20_03_2018/AS_20_03_2018_NN_diffuse.tif
      md5: 80df6572754f657480079ba09395c79d
      size: 1194374594
    - path: data/sites/ASWAN/tiles.geojson
      md5: 9a5543948a27ad9b6b382ecd050308fc
      size: 138567
    - path: src/alceo/processing/rasterize_tiles.py
      md5: ea9cf7341953f40c4fc10acc7deca653
      size: 5338
    outs:
    - path: data/sites/ASWAN/tiles/AS_20_03_2018/
      md5: d35d752eb00eb84d140294e255b086cb.dir
      size: 160670196
      nfiles: 306
  rasterize_change@5:
    cmd:
    - mkdir -p data/sites/ASWAN/change/AS_04_08_2005/AS_20_03_2018/raster/
    - rio rasterize data/sites/ASWAN/change/AS_04_08_2005/AS_20_03_2018/vectorial/pits.disappeared.geojson
      --like data/sites/ASWAN/images/AS_04_08_2005/AS_04_08_2005_QB_NN_diffuse_geo.tif
      --output data/sites/ASWAN/change/AS_04_08_2005/AS_20_03_2018/raster/pits.disappeared.tif
    deps:
    - path: data/sites/ASWAN/change/AS_04_08_2005/AS_20_03_2018/vectorial/pits.disappeared.geojson
      md5: fa8c3688ba3895b7f354870f05ea15c0
      size: 247223
    - path: data/sites/ASWAN/images/AS_04_08_2005/AS_04_08_2005_QB_NN_diffuse_geo.tif
      md5: d5d532307cd9d2df5a731a32c096f534
      size: 579448123
    outs:
    - path: data/sites/ASWAN/change/AS_04_08_2005/AS_20_03_2018/raster/pits.disappeared.tif
      md5: 22956ba99791fd862a4b1d0f81bc794f
      size: 144861452
  tilize_change@5:
    cmd:
    - mkdir -p data/sites/ASWAN/change/AS_04_08_2005/AS_20_03_2018/raster/pits.disappeared/tiles
    - python src/alceo/processing/rasterize_tiles.py -t data/sites/ASWAN/tiles.geojson
      -i data/sites/ASWAN/change/AS_04_08_2005/AS_20_03_2018/raster/pits.disappeared.tif
      -o data/sites/ASWAN/change/AS_04_08_2005/AS_20_03_2018/raster/pits.disappeared/tiles
    deps:
    - path: data/sites/ASWAN/change/AS_04_08_2005/AS_20_03_2018/raster/pits.disappeared.tif
      md5: 22956ba99791fd862a4b1d0f81bc794f
      size: 144861452
    - path: data/sites/ASWAN/tiles.geojson
      md5: 9a5543948a27ad9b6b382ecd050308fc
      size: 138567
    - path: src/alceo/processing/rasterize_tiles.py
      md5: ea9cf7341953f40c4fc10acc7deca653
      size: 5338
    outs:
    - path: data/sites/ASWAN/change/AS_04_08_2005/AS_20_03_2018/raster/pits.disappeared/tiles
      md5: ef9c774deb93da0a0c812d82db7c156b.dir
      size: 40247568
      nfiles: 306
  tilize_change@4:
    cmd:
    - mkdir -p data/sites/ASWAN/change/AS_04_08_2005/AS_20_03_2018/raster/pits.appeared/tiles
    - python src/alceo/processing/rasterize_tiles.py -t data/sites/ASWAN/tiles.geojson
      -i data/sites/ASWAN/change/AS_04_08_2005/AS_20_03_2018/raster/pits.appeared.tif
      -o data/sites/ASWAN/change/AS_04_08_2005/AS_20_03_2018/raster/pits.appeared/tiles
    deps:
    - path: data/sites/ASWAN/change/AS_04_08_2005/AS_20_03_2018/raster/pits.appeared.tif
      md5: 3ed0a4275d630f412f786d12a38047e1
      size: 144861452
    - path: data/sites/ASWAN/tiles.geojson
      md5: 9a5543948a27ad9b6b382ecd050308fc
      size: 138567
    - path: src/alceo/processing/rasterize_tiles.py
      md5: ea9cf7341953f40c4fc10acc7deca653
      size: 5338
    outs:
    - path: data/sites/ASWAN/change/AS_04_08_2005/AS_20_03_2018/raster/pits.appeared/tiles
      md5: 5750d781da60498236515be2e908f2b1.dir
      size: 40247568
      nfiles: 306
  tilize_image@0:
    cmd: python src/alceo/processing/rasterize_tiles.py -t data/sites/ASWAN/tiles.geojson
      -i data/sites/ASWAN/images/AS_04_08_2005/AS_04_08_2005_QB_NN_diffuse_geo.tif
      -o data/sites/ASWAN/tiles/AS_04_08_2005
    deps:
    - path: data/sites/ASWAN/images/AS_04_08_2005/AS_04_08_2005_QB_NN_diffuse_geo.tif
      md5: d5d532307cd9d2df5a731a32c096f534
      size: 579448123
    - path: data/sites/ASWAN/tiles.geojson
      md5: 9a5543948a27ad9b6b382ecd050308fc
      size: 138567
    - path: src/alceo/processing/rasterize_tiles.py
      md5: ea9cf7341953f40c4fc10acc7deca653
      size: 5338
    outs:
    - path: data/sites/ASWAN/tiles/AS_04_08_2005/
      md5: 41a3d0443f4f3a05a3229784627c3cc3.dir
      size: 160670196
      nfiles: 306
